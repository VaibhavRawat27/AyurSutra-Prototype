<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AyurSutra - Your Wellness Platform</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        /* --- Base & Variables --- */
        :root {
            --primary-color: #8B4513; /* SaddleBrown */
            --primary-dark: #6B240C;
            --secondary-color: #556B2F; /* DarkOliveGreen */
            --accent-color: #DAA520; /* GoldenRod */
            --bg-light: #F5F5DC; /* Beige */
            --card-bg: #ffffff;
            --text-dark: #3a3a3a;
            --text-light: #6b6b6b;
            --border-color: #e5e7eb;
            --verified-color: #059669; /* Emerald 600 */
        }

        body.dark {
            --primary-color: #a1623a;
            --primary-dark: #bd7a50;
            --secondary-color: #8fbc8f;
            --accent-color: #f0e68c;
            --bg-light: #121212;
            --card-bg: #1e1e1e;
            --text-dark: #e0e0e0;
            --text-light: #a0a0a0;
            --border-color: #333333;
            --verified-color: #34d399; /* Emerald 400 */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            margin: 0;
            transition: background-color 0.3s, color 0.3s;
        }
        * {
            box-sizing: border-box;
        }
        .container {
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            padding: 1rem 2rem;
        }
        .view { display: none; }
        .active-view { display: block; }
        a { color: var(--secondary-color); text-decoration: none; }
        a:hover { text-decoration: underline; }

        /* --- Components --- */
        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 500;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            text-align: center;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease-in-out;
        }
        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }
        .btn-primary { background-color: var(--primary-color); color: white; }
        .btn-primary:hover { background-color: var(--primary-dark); }
        .btn-secondary { background-color: var(--secondary-color); color: white; }
        .btn-secondary:hover { opacity: 0.9; }

        .card {
            background-color: var(--card-bg);
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, box-shadow 0.3s, transform 0.3s;
        }
        body.dark .card {
             box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -2px rgba(0, 0, 0, 0.4);
        }
        .card:hover:not(.non-interactive) {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
            transform: translateY(-0.25rem);
        }
        body.dark .card:hover:not(.non-interactive) {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -4px rgba(0, 0, 0, 0.4);
        }


        .input-field, textarea.input-field {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            font-size: 1rem;
            transition: border-color 0.2s, box-shadow 0.2s, background-color 0.3s, color 0.3s;
            background-color: var(--card-bg);
            color: var(--text-dark);
            font-family: 'Inter', sans-serif;
        }
        .input-field:focus {
            outline: none;
            border-color: transparent;
            box-shadow: 0 0 0 2px var(--secondary-color);
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border-left-color: var(--secondary-color);
            animation: spin 1s ease infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* --- Theme Toggle --- */
        .theme-switch-wrapper { display: flex; align-items: center; gap: 0.5rem;}
        .theme-switch { display: inline-block; height: 22px; position: relative; width: 42px; }
        .theme-switch input { display:none; }
        .slider { background-color: #ccc; bottom: 0; cursor: pointer; left: 0; position: absolute; right: 0; top: 0; transition: .4s; }
        .slider:before { background-color: #fff; bottom: 3px; content: ""; height: 16px; left: 3px; position: absolute; transition: .4s; width: 16px; }
        input:checked + .slider { background-color: var(--secondary-color); }
        input:checked + .slider:before { transform: translateX(20px); }
        .slider.round { border-radius: 34px; }
        .slider.round:before { border-radius: 50%; }

        /* --- Header / Navigation --- */
        .header {
            background-color: var(--card-bg);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 50;
            transition: background-color 0.3s;
        }
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo-container { display: flex; align-items: center; gap: 0.75rem; }
        .logo { display: flex; align-items: center; gap: 0.5rem; cursor: pointer;}
        .logo-icon { font-size: 2rem; color: var(--secondary-color); }
        .logo-text { font-size: 1.75rem; font-weight: 700; color: var(--primary-color); }
        .ehr-verified { display: flex; align-items: center; gap: 0.25rem; font-size: 0.75rem; color: var(--verified-color); font-weight: 600; }
        .ehr-verified i { font-size: 1.25rem; }
        
        .nav-links { display: none; }
        .nav-links a { font-size: 1.125rem; }
        .auth-links, .user-menu { display: flex; align-items: center; gap: 1rem; }
        .user-menu-button { position: relative; width: 2.5rem; height: 2.5rem; background-color: var(--bg-light); color: var(--text-dark); border-radius: 9999px; display: flex; align-items: center; justify-content: center; border: none; cursor: pointer; transition: background-color 0.3s; }
        .user-menu-button i { font-size: 1.5rem; }
        .notification-dot { display:none; position: absolute; top: 0.5rem; right: 0.5rem; width: 8px; height: 8px; background-color: #ef4444; border-radius: 50%; border: 1.5px solid var(--card-bg); }
        .notification-dot.active { display: block; }
        
        .user-dropdown, .notification-dropdown { display: none; position: absolute; right: 0; margin-top: 0.5rem; width: 20rem; background-color: var(--card-bg); border-radius: 0.375rem; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); z-index: 20; border: 1px solid var(--border-color); max-height: 400px; overflow-y: auto; }
        .user-dropdown { width: 12rem; }
        .user-dropdown a { display: block; padding: 0.5rem 1rem; font-size: 0.875rem; color: var(--text-dark); }
        .user-dropdown a:hover { background-color: var(--bg-light); }
        .notification-header { padding: 0.75rem 1rem; font-weight: 600; border-bottom: 1px solid var(--border-color); }
        .notification-item { display: flex; gap: 0.75rem; padding: 0.75rem 1rem; border-bottom: 1px solid var(--border-color); font-size: 0.875rem; }
        .notification-item:last-child { border-bottom: none; }
        .notification-item.unread { background-color: var(--bg-light); }
        .notification-item i { font-size: 1.5rem; color: var(--secondary-color); margin-top: 0.25rem; }
        .notification-time { font-size: 0.75rem; color: var(--text-light); }
        
        /* --- Layouts & Grids --- */
        .dashboard-grid { display: grid; gap: 1.5rem; grid-template-columns: repeat(1, 1fr); }
        .doctor-list-grid { display: grid; gap: 1.5rem; grid-template-columns: repeat(1, 1fr); }
        .form-grid { display: grid; gap: 1rem; grid-template-columns: repeat(1, 1fr); }
        .profile-grid { display: grid; gap: 1.5rem; grid-template-columns: 1fr; }
        .role-selection-grid { display: grid; gap: 1.5rem; grid-template-columns: 1fr; }
        
        /* --- Specific Section Styles --- */
        .home-hero { text-align: center; }
        .home-hero h1 { font-size: 2.5rem; font-weight: 700; color: var(--primary-color); margin-bottom: 1rem; }
        .home-hero p { font-size: 1.25rem; color: var(--text-light); margin-bottom: 2rem; max-width: 48rem; margin-left: auto; margin-right: auto; }
        .role-card { text-align: center; cursor: pointer;}
        .role-card i { font-size: 4rem; color: var(--secondary-color); margin-bottom: 1rem; }
        .role-card h3 { font-size: 1.5rem; font-weight: 600; color: var(--primary-color); }
        
        .auth-tabs { display: flex; border-bottom: 1px solid var(--border-color); margin-bottom: 1.5rem; }
        .tab { padding: 0.5rem 1.5rem; font-size: 1.125rem; font-weight: 600; cursor: pointer; color: #6b7280; border-bottom: 2px solid transparent; }
        .tab-active { color: var(--primary-color); border-bottom-color: var(--primary-color); }
        
        .page-title { font-size: 2rem; font-weight: 700; margin-bottom: 1.5rem; color: var(--primary-color); }
        .page-subtitle { font-size: 1.125rem; color: var(--text-light); margin-top: -1rem; margin-bottom: 1.5rem; }

        
        .ai-chat-history { height: 20rem; overflow-y: auto; background-color: var(--bg-light); border-radius: 0.5rem; padding: 1rem; margin-bottom: 1rem; border: 1px solid var(--border-color); }
        
        /* --- APPOINTMENT CARD --- */
        .appointment-grid { display: grid; gap: 1.5rem; grid-template-columns: 1fr; }
        .appointment-card {
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 1.5rem;
            border: 1px solid var(--border-color);
            padding: 1rem;
            border-radius: 0.5rem;
            background-color: var(--card-bg);
        }
        .appointment-card-time { text-align: center; }
        .appointment-card-time .day { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); line-height: 1; }
        .appointment-card-time .label { font-size: 0.875rem; color: var(--text-light); }
        .appointment-card-details h4 { font-size: 1.125rem; font-weight: 600; margin: 0 0 0.25rem 0; }
        .appointment-card-details p { margin: 0; color: var(--text-light); display: flex; align-items: center; gap: 0.5rem; }
        .appointment-card-actions { display: flex; flex-direction: column; gap: 0.5rem; }

        .detail-grid { display: grid; grid-template-columns: 1fr; gap: 2rem; }
        .detail-info-card { display: flex; align-items: center; gap: 1rem; }
        .detail-info-card img { width: 5rem; height: 5rem; border-radius: 50%; border: 3px solid var(--secondary-color); }
        
        /* --- Educational Feed Styles --- */
        .feed-grid { display: grid; gap: 1.5rem; grid-template-columns: 1fr; }
        .article-card { display: flex; gap: 1.5rem; }
        .article-card img { width: 120px; height: 120px; object-fit: cover; border-radius: 0.5rem; }
        .article-card-content h4 { margin: 0 0 0.5rem 0; font-size: 1.25rem; color: var(--primary-color); }
        .article-card-content p { margin: 0; color: var(--text-light); }

        /* --- Messages Styles --- */
        .message-thread {
            display: flex; align-items: center; gap: 1rem;
            padding: 1rem; border-bottom: 1px solid var(--border-color);
            cursor: pointer; transition: background-color 0.2s;
        }
        .message-thread:hover { background-color: var(--bg-light); }
        .message-thread.unread .message-subject { font-weight: 700; color: var(--text-dark); }
        .message-icon { font-size: 2rem; color: var(--secondary-color); }
        .message-subject { font-size: 1.1rem; }
        .message-from { font-size: 0.9rem; color: var(--text-light); }
        .message-indicator { width: 8px; height: 8px; background-color: var(--accent-color); border-radius: 50%; }

        /* --- Contact Us Page --- */
        .contact-grid { display: grid; gap: 2rem; grid-template-columns: 1fr; }
        .contact-details ul { list-style: none; padding: 0; margin: 0; }
        .contact-details li { display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; font-size: 1.125rem; }
        .contact-details li i { font-size: 1.5rem; color: var(--secondary-color); }

        /* --- Manage Schedule Calendar --- */
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.5rem; text-align: center; }
        .day-name { font-weight: 600; color: var(--text-light); font-size: 0.875rem; padding-bottom: 0.5rem; }
        .date-cell { padding: 0.75rem 0.25rem; border: 1px solid var(--border-color); border-radius: 0.375rem; }
        .date-cell.other-month { color: var(--text-light); opacity: 0.5; }
        .date-cell.current-day { background-color: var(--secondary-color); color: white; font-weight: 700; }
        .schedule-form-grid { display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 1rem; align-items: end; }

        /* --- Patient Feedback --- */
        .feedback-item { border-bottom: 1px solid var(--border-color); padding: 1rem 0; }
        .feedback-item:last-child { border-bottom: none; padding-bottom: 0; }
        .feedback-item:first-child { padding-top: 0; }
        .feedback-quote { font-style: italic; color: var(--text-dark); }
        .feedback-author { text-align: right; font-weight: 600; color: var(--primary-color); }
        .stars { color: var(--accent-color); }

        /* --- NEW: Interactive Quiz Styles --- */
        #quiz-progress-container { width: 100%; background-color: var(--border-color); border-radius: 0.5rem; height: 1rem; margin-bottom: 2rem; overflow: hidden; }
        #quiz-progress-bar { width: 0%; height: 100%; background-color: var(--secondary-color); transition: width 0.4s ease-in-out; }
        #quiz-question-container { min-height: 250px; transition: opacity 0.3s ease-in-out; }
        .quiz-question-text { font-size: 1.5rem; font-weight: 600; margin-bottom: 1.5rem; color: var(--primary-color); text-align: center; }
        .quiz-options { display: grid; grid-template-columns: 1fr; gap: 1rem; }
        .quiz-options label {
            display: block;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .quiz-options label:hover { border-color: var(--secondary-color); background-color: var(--bg-light); }
        .quiz-options input[type="radio"] { display: none; }
        .quiz-options input[type="radio"]:checked + label {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
            font-weight: 600;
        }
        #quiz-result-card { text-align: center; }
        #quiz-result-card i { font-size: 5rem; color: var(--secondary-color); margin-bottom: 1rem; }

        /* --- Responsive Design --- */
        @media (min-width: 768px) { /* md */
            .nav-links { display: flex; align-items: center; gap: 1.5rem; }
            .dashboard-grid { grid-template-columns: repeat(2, 1fr); }
            .doctor-list-grid { grid-template-columns: repeat(2, 1fr); }
            .form-grid { grid-template-columns: repeat(4, 1fr); }
            .profile-grid { grid-template-columns: 200px 1fr; }
            .role-selection-grid { grid-template-columns: repeat(3, 1fr); }
            .detail-grid { grid-template-columns: 2fr 1fr; }
            .appointment-grid { grid-template-columns: repeat(2, 1fr); }
            .home-hero h1 { font-size: 3rem; }
            .contact-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (min-width: 1024px) { /* lg */
            .dashboard-grid { grid-template-columns: repeat(4, 1fr); }
            .doctor-list-grid { grid-template-columns: repeat(3, 1fr); }
            .feed-grid { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>

    <header class="header">
        <nav class="container navbar">
            <div class="logo-container">
                <div class="logo" onclick="goHome()">
                    <i class="ph-bold ph-leaf logo-icon"></i>
                    <span class="logo-text">AyurSutra</span>
                </div>
                <div class="ehr-verified" title="EHR Compliant and Verified Platform">
                    <i class="ph-fill ph-seal-check"></i>
                    <span>EHR<br>Verified</span>
                </div>
            </div>
            <div id="main-nav-links" class="nav-links">
                <a href="#" onclick="showView('find-doctor-view')">Find a Doctor</a>
                <a href="#" onclick="startQuiz()">Know Your Dosha</a>
                <a href="#" onclick="showView('contact-us-view')">Contact Us</a>
            </div>
            <div id="auth-links" class="auth-links">
                <div class="theme-switch-wrapper">
                    <i class="ph ph-sun"></i>
                    <label class="theme-switch">
                        <input type="checkbox" id="theme-toggle">
                        <span class="slider round"></span>
                    </label>
                    <i class="ph ph-moon"></i>
                </div>
                <button class="btn btn-secondary" onclick="showView('auth-view')">Login</button>
            </div>
            <div id="user-menu" class="user-menu" style="display: none;">
                <div class="theme-switch-wrapper">
                    <i class="ph ph-sun"></i>
                    <label class="theme-switch">
                        <input type="checkbox" id="theme-toggle-user">
                        <span class="slider round"></span>
                    </label>
                    <i class="ph ph-moon"></i>
                </div>
                <span id="welcome-message" style="font-weight: 600;"></span>
                <div style="position: relative;">
                    <button class="user-menu-button" title="Notifications" onclick="toggleNotifications()">
                        <i class="ph ph-bell"></i>
                        <span id="notification-dot" class="notification-dot"></span>
                    </button>
                    <div id="notification-dropdown" class="notification-dropdown">
                         </div>
                </div>
                <div style="position: relative;">
                    <button onclick="toggleDropdown()" class="user-menu-button" title="User Menu">
                        <i class="ph ph-user"></i>
                    </button>
                    <div id="user-dropdown" class="user-dropdown">
                        <a href="#" onclick="showDashboard()">My Dashboard</a>
                        <a href="#" onclick="showView('profile-view')">My Profile</a>
                        <a href="#" onclick="logout()">Logout</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="container">

        <section id="home-view" class="view active-view">
            <div class="home-hero">
                <h1 >Welcome to AyurSutra</h1>
                <p>Your personalized path to holistic wellness. Please select your role to begin.</p>
            </div>
            <div class="role-selection-grid">
                <div class="card role-card" onclick="showLoginForRole('customer')">
                    <i class="ph-bold ph-user-circle"></i>
                    <h3>For Patients</h3>
                    <p class="text-light">Book appointments, track your wellness, and connect with doctors.</p>
                </div>
                <div class="card role-card" onclick="showLoginForRole('doctor')">
                    <i class="ph-bold ph-first-aid-kit"></i>
                    <h3>For Doctors</h3>
                    <p class="text-light">Manage your patients, schedule, and earnings.</p>
                </div>
                <div class="card role-card" onclick="showLoginForRole('admin')">
                    <i class="ph-bold ph-gear-six"></i>
                    <h3>Admin Portal</h3>
                    <p class="text-light">Oversee platform operations and management.</p>
                </div>
            </div>
        </section>

        <section id="auth-view" class="view" style="max-width: 28rem; margin: auto;">
            <div class="card non-interactive">
                <div class="auth-tabs">
                    <div id="login-tab" class="tab tab-active" onclick="switchAuthTab('login')">Login</div>
                    <div id="register-tab" class="tab" onclick="switchAuthTab('register')">Register</div>
                </div>
                <form id="login-form">
                    <div style="margin-bottom: 1rem;">
                        <label for="login-email" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Email</label>
                        <input type="email" id="login-email" class="input-field" placeholder="you@example.com" required>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <label for="login-password" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Password</label>
                        <input type="password" id="login-password" class="input-field" required>
                    </div>
                    <div style="text-align: right; margin-bottom: 1.5rem;">
                        <a href="#" onclick="showView('forgot-password-view')" style="font-size: 0.875rem;">Forgot Password?</a>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
                </form>
                <form id="register-form" style="display: none;">
                     <div style="margin-bottom: 1rem;"><label for="register-name" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Full Name</label><input type="text" id="register-name" class="input-field" placeholder="John Doe" required></div>
                    <div style="margin-bottom: 1rem;"><label for="register-email" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Email</label><input type="email" id="register-email" class="input-field" placeholder="you@example.com" required></div>
                    <div style="margin-bottom: 1rem;"><label for="register-password" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Password</label><input type="password" id="register-password" class="input-field" required></div>
                    <div style="margin-bottom: 1.5rem;"><label for="register-role" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">I am a:</label><select id="register-role" class="input-field"><option value="Customer">Customer / Patient</option><option value="Doctor">Doctor / Agent</option></select></div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Create Account</button>
                </form>
            </div>
        </section>

        <section id="forgot-password-view" class="view" style="max-width: 28rem; margin: auto;">
            <div class="card non-interactive">
                <h2 class="page-title" style="font-size:1.5rem; text-align:center; margin-bottom: 0.5rem;">Reset Password</h2>
                <p style="text-align: center; color: var(--text-light); margin-bottom: 1.5rem;">Enter your email to receive a reset link.</p>
                <form id="forgot-password-form">
                    <div style="margin-bottom: 1.5rem;">
                        <label for="forgot-email" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Email</label>
                        <input type="email" id="forgot-email" class="input-field" placeholder="you@example.com" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Send Reset Link</button>
                    <p style="text-align: center; margin-top: 1rem;"><a href="#" onclick="showView('auth-view')">&larr; Back to Login</a></p>
                </form>
            </div>
        </section>
        
        <section id="contact-us-view" class="view">
            <h2 class="page-title">Contact Us</h2>
            <p class="page-subtitle">We're here to help. Reach out to us with any questions.</p>
            <div class="contact-grid">
                <div class="card non-interactive">
                    <h3 style="font-size: 1.5rem; font-weight: 600; color: var(--primary-color); margin-top: 0; margin-bottom: 1.5rem;">Get in Touch</h3>
                    <div class="contact-details">
                        <ul>
                            <li><i class="ph-fill ph-phone-call"></i> <span>+91 98765 43210</span></li>
                            <li><i class="ph-fill ph-envelope-simple"></i> <span>support@ayursutra.com</span></li>
                            <li><i class="ph-fill ph-map-pin"></i> <span>123 Wellness Lane, Sector 17,<br>Chandigarh, 160017, India</span></li>
                        </ul>
                    </div>
                </div>
                <div class="card non-interactive">
                    <h3 style="font-size: 1.5rem; font-weight: 600; color: var(--primary-color); margin-top: 0; margin-bottom: 1.5rem;">Send a Message</h3>
                     <form id="contact-form">
                        <div style="margin-bottom: 1rem;">
                            <label for="contact-name" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Full Name</label>
                            <input type="text" id="contact-name" class="input-field" required>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <label for="contact-email" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Email</label>
                            <input type="email" id="contact-email" class="input-field" required>
                        </div>
                        <div style="margin-bottom: 1.5rem;">
                            <label for="contact-message" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Message</label>
                            <textarea id="contact-message" class="input-field" rows="4" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </form>
                </div>
            </div>
        </section>

        <section id="customer-dashboard-view" class="view">
            <h2 class="page-title">Customer Dashboard</h2>
            <div class="card non-interactive" style="margin-bottom: 2.5rem;">
                <h3 class="page-title" style="font-size:1.5rem; margin-bottom:1rem;">Upcoming Appointments</h3>
                <div id="customer-appointments" class="appointment-grid"></div>
            </div>
            <div class="dashboard-grid">
                <div class="card"><i class="ph ph-calendar-plus" style="font-size: 2.5rem; color: var(--secondary-color); margin-bottom: 0.75rem; display:block;"></i><h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;">Book an Appointment</h3><p style="color: var(--text-light); margin-bottom: 1rem;">Find expert Ayurvedic doctors.</p><button class="btn btn-secondary" style="width: 100%;" onclick="showView('find-doctor-view')">Find a Doctor</button></div>
                <div class="card"><i class="ph ph-first-aid-kit" style="font-size: 2.5rem; color: var(--secondary-color); margin-bottom: 0.75rem; display:block;"></i><h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;">Doctor's Instructions</h3><p style="color: var(--text-light); margin-bottom: 1rem;">View your prescribed therapies.</p><button class="btn btn-secondary" style="width: 100%;" onclick="showView('treatment-plan-view')">View Plan</button></div>
                <div class="card"><i class="ph ph-notebook" style="font-size: 2.5rem; color: var(--secondary-color); margin-bottom: 0.75rem; display:block;"></i><h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;">Wellness Journal</h3><p style="color: var(--text-light); margin-bottom: 1rem;">Track your diet, mood, and symptoms.</p><button class="btn btn-secondary" style="width: 100%;" onclick="showView('journal-view')">Open Journal</button></div>
                <div class="card"><i class="ph ph-chart-line" style="font-size: 2.5rem; color: var(--secondary-color); margin-bottom: 0.75rem; display:block;"></i><h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;">Progress Tracker</h3><p style="color: var(--text-light); margin-bottom: 1rem;">Visualize your wellness journey.</p><button class="btn btn-secondary" style="width: 100%;" onclick="showView('progress-tracker-view')">View Progress</button></div>
                <div class="card"><i class="ph ph-book-open-text" style="font-size: 2.5rem; color: var(--secondary-color); margin-bottom: 0.75rem; display:block;"></i><h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;">Educational Feed</h3><p style="color: var(--text-light); margin-bottom: 1rem;">Read articles about wellness.</p><button class="btn btn-secondary" style="width: 100%;" onclick="showView('educational-feed-view')">View Feed</button></div>
                <div class="card"><i class="ph ph-chat-circle-dots" style="font-size: 2.5rem; color: var(--secondary-color); margin-bottom: 0.75rem; display:block;"></i><h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;">Messages</h3><p style="color: var(--text-light); margin-bottom: 1rem;">Check for updates from your doctor.</p><button class="btn btn-secondary" style="width: 100%;" onclick="showView('messages-view')">Open Messages</button></div>
                <div class="card" style="grid-column: span 1 / span 1;"><i class="ph ph-sparkle" style="font-size: 2.5rem; color: var(--secondary-color); margin-bottom: 0.75rem; display:block;"></i><h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;">AI Wellness Assistant</h3><p style="color: var(--text-light); margin-bottom: 1rem;">Ask general wellness questions.</p><button class="btn btn-secondary" style="width: 100%;" onclick="showView('ai-wellness-view')">Ask AI</button></div>
            </div>
        </section>

        <section id="doctor-dashboard-view" class="view">
             <h2 class="page-title">Doctor Dashboard</h2>
                 <div class="card non-interactive" style="margin-bottom: 2.5rem;">
                 <h3 class="page-title" style="font-size:1.5rem; margin-bottom:1rem;">Today's Appointments</h3>
                 <div id="doctor-appointments" class="appointment-grid"></div>
               </div>
             <div class="dashboard-grid">
                 <div class="card"><i class="ph ph-calendar" style="font-size: 2.5rem; color: var(--secondary-color); margin-bottom: 0.75rem; display:block;"></i><h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;">Manage Schedule</h3><p style="color: var(--text-light); margin-bottom: 1rem;">Set your availability.</p><button class="btn btn-secondary" style="width: 100%;" onclick="showView('manage-schedule-view')">Open Calendar</button></div>
                   <div class="card"><i class="ph ph-users-three" style="font-size: 2.5rem; color: var(--secondary-color); margin-bottom: 0.75rem; display:block;"></i><h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;">My Patients</h3><p style="color: var(--text-light); margin-bottom: 1rem;">Access patient history.</p><button class="btn btn-secondary" style="width: 100%;" onclick="showView('patient-list-view')">View Patients</button></div>
                   <div class="card"><i class="ph ph-wallet" style="font-size: 2.5rem; color: var(--secondary-color); margin-bottom: 0.75rem; display:block;"></i><h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;">Earnings</h3><p style="color: var(--text-light); margin-bottom: 1rem;">View your financial overview.</p><button class="btn btn-secondary" style="width: 100%;" onclick="showView('earnings-view')">My Earnings</button></div>
                   <div class="card" style="background-color: #f0fdf4; border: 2px dashed var(--secondary-color);"><i class="ph ph-magic-wand" style="font-size: 2.5rem; color: var(--secondary-color); margin-bottom: 0.75rem; display:block;"></i><h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;">AI Summarizer</h3><p style="color: var(--text-light); margin-bottom: 1rem;">Generate patient-friendly summaries.</p><button class="btn btn-secondary" style="width: 100%;" onclick="showView('ai-summarizer-view')">Use AI Tool</button></div>
             </div>
             <div class="card non-interactive" style="margin-top: 2.5rem;">
                <h3 class="page-title" style="font-size:1.5rem; margin-bottom:1rem;">Recent Patient Feedback</h3>
                <div id="patient-feedback-container">
                    <div class="feedback-item">
                        <p class="feedback-quote">"Very satisfied with the treatment plan. I'm already feeling more energetic and balanced."</p>
                        <p class="feedback-author">~ Rohan V. <span class="stars">★★★★★</span></p>
                    </div>
                    <div class="feedback-item">
                        <p class="feedback-quote">"The doctor was very attentive and caring. She listened to all my concerns patiently and explained everything clearly."</p>
                        <p class="feedback-author">~ Sunita K. <span class="stars">★★★★★</span></p>
                    </div>
                     <div class="feedback-item">
                        <p class="feedback-quote">"A truly holistic approach. I appreciate how the focus is on overall wellness, not just symptoms."</p>
                        <p class="feedback-author">~ Ankit P. <span class="stars">★★★★☆</span></p>
                    </div>
                </div>
             </div>
        </section>
        
        <section id="manage-schedule-view" class="view">
            <h2 class="page-title">Manage Your Schedule</h2>
            <p class="page-subtitle">Set your availability so patients can book appointments.</p>
            <div class="card non-interactive" style="margin-bottom: 2rem;">
                <h3 style="text-align:center; font-size: 1.5rem; color: var(--primary-color); margin-top:0;">September 2025</h3>
                <div class="calendar-grid">
                    <div class="day-name">Sun</div><div class="day-name">Mon</div><div class="day-name">Tue</div><div class="day-name">Wed</div><div class="day-name">Thu</div><div class="day-name">Fri</div><div class="day-name">Sat</div>
                    <div class="date-cell other-month">31</div>
                    <div class="date-cell">1</div><div class="date-cell">2</div><div class="date-cell">3</div><div class="date-cell">4</div><div class="date-cell">5</div><div class="date-cell">6</div>
                    <div class="date-cell">7</div><div class="date-cell">8</div><div class="date-cell">9</div><div class="date-cell">10</div><div class="date-cell">11</div><div class="date-cell">12</div><div class="date-cell">13</div>
                    <div class="date-cell">14</div><div class="date-cell">15</div><div class="date-cell current-day">16</div><div class="date-cell">17</div><div class="date-cell">18</div><div class="date-cell">19</div><div class="date-cell">20</div>
                    <div class="date-cell">21</div><div class="date-cell">22</div><div class="date-cell">23</div><div class="date-cell">24</div><div class="date-cell">25</div><div class="date-cell">26</div><div class="date-cell">27</div>
                    <div class="date-cell">28</div><div class="date-cell">29</div><div class="date-cell">30</div><div class="date-cell other-month">1</div><div class="date-cell other-month">2</div><div class="date-cell other-month">3</div><div class="date-cell other-month">4</div>
                </div>
            </div>
             <div class="card non-interactive">
                <h3 style="font-size: 1.5rem; color: var(--primary-color); margin-top:0;">Add New Availability Slot</h3>
                <form id="schedule-form" class="schedule-form-grid">
                    <div>
                        <label style="display:block; margin-bottom: 0.5rem; font-weight: 500;">Date</label>
                        <input type="date" class="input-field" value="2025-09-17">
                    </div>
                    <div>
                        <label style="display:block; margin-bottom: 0.5rem; font-weight: 500;">Start Time</label>
                        <input type="time" class="input-field" value="09:00">
                    </div>
                     <div>
                        <label style="display:block; margin-bottom: 0.5rem; font-weight: 500;">End Time</label>
                        <input type="time" class="input-field" value="17:00">
                    </div>
                    <button type="submit" class="btn btn-primary">Set Availability</button>
                </form>
            </div>
        </section>

        <section id="admin-dashboard-view" class="view">
            <h2 class="page-title">Admin Panel</h2>
            <div class="dashboard-grid" style="margin-bottom: 2rem;">
                <div class="card non-interactive" style="text-align: center;"><p style="font-size: 2.25rem; font-weight: 700; color: var(--secondary-color);">1,250</p><p style="color: var(--text-light);">Total Users</p></div>
                <div class="card non-interactive" style="text-align: center;"><p style="font-size: 2.25rem; font-weight: 700; color: var(--secondary-color);">75</p><p style="color: var(--text-light);">Verified Doctors</p></div>
                <div class="card non-interactive" style="text-align: center;"><p style="font-size: 2.25rem; font-weight: 700; color: var(--secondary-color);">312</p><p style="color: var(--text-light);">Appointments this Month</p></div>
                <div class="card non-interactive" style="text-align: center;"><p style="font-size: 2.25rem; font-weight: 700; color: var(--secondary-color);">₹1,264,000</p><p style="color: var(--text-light);">Monthly Revenue</p></div>
            </div>
            <div style="display: grid; gap: 2rem; grid-template-columns: 1fr;">
                <div class="card non-interactive"><h3 class="page-title" style="font-size: 1.5rem; margin-bottom: 1rem;">Admin Actions</h3>
                    <div style="display:flex; flex-wrap:wrap; gap:1rem;">
                        <button class="btn btn-secondary" onclick="showView('user-management-view')">Manage Users</button>
                        <button class="btn btn-secondary" onclick="showView('service-management-view')">Manage Services</button>
                    </div>
                </div>
                <div class="card non-interactive"><h3 class="page-title" style="font-size: 1.5rem; margin-bottom: 1rem;">Doctor Verification Queue <span style="font-size: 0.75rem; background-color: #ef4444; color: white; border-radius: 9999px; padding: 0.1rem 0.5rem;">2</span></h3><div id="admin-verification-queue"></div></div>
            </div>
        </section>

        <section id="appointment-detail-view" class="view">
            <button class="btn btn-secondary" style="margin-bottom: 1.5rem;" onclick="showDashboard()">&larr; Back to Dashboard</button>
            <h2 id="ad-title" class="page-title">Appointment Details</h2>
            <div class="detail-grid">
                <div>
                    <div class="card non-interactive" style="margin-bottom: 1.5rem;">
                        <div id="ad-header-info" class="detail-info-card">
                            </div>
                    </div>
                    <div class="card non-interactive">
                        <h3 style="font-size: 1.25rem; font-weight: 600; color: var(--primary-color); margin-bottom: 1rem;">Details</h3>
                        <p><strong>Service:</strong> <span id="ad-service"></span></p>
                        <p><strong>Date:</strong> <span id="ad-date"></span></p>
                        <p><strong>Time:</strong> <span id="ad-time"></span></p>
                        <p><strong>Type:</strong> <span id="ad-type"></span></p>
                        <p><strong>Status:</strong> <span id="ad-status" style="font-weight: bold; color: var(--secondary-color);"></span></p>
                    </div>
                </div>
                <div>
                    <div class="card non-interactive" style="text-align: center; margin-bottom: 1.5rem;">
                          <p style="font-size: 3rem; font-weight: 700; color: var(--primary-color);" id="ad-countdown-days">--</p>
                          <p style="color: var(--text-light); margin-top: -0.5rem;" id="ad-countdown-label">Days to go</p>
                    </div>
                     <div class="card non-interactive">
                          <h3 style="font-size: 1.25rem; font-weight: 600; color: var(--primary-color); margin-bottom: 1rem;">Payment</h3>
                          <p style="display: flex; justify-content: space-between;"><span>Service Fee</span> <strong id="ad-price"></strong></p>
                          <hr style="border: none; border-top: 1px solid var(--border-color); margin: 1rem 0;">
                          <p style="display: flex; justify-content: space-between; font-weight: bold;"><span>Total</span> <span id="ad-total-price"></span></p>
                     </div>
                     <div id="ad-action-buttons" style="margin-top: 1.5rem; display: flex; flex-direction: column; gap: 0.5rem;">
                         </div>
                </div>
            </div>
        </section>

        <section id="find-doctor-view" class="view">
             <h2 class="page-title" style="margin-bottom: 0.5rem;">Find a Doctor</h2>
             <p class="page-subtitle">Search for a specialist that fits your needs.</p>
             <div class="card non-interactive form-grid" style="margin-bottom: 2rem; align-items: end;">
                 <input type="text" placeholder="Location (e.g., Chandigarh)" class="input-field">
                 <select class="input-field"><option>Any Specialization</option><option>Panchakarma</option><option>Kayachikitsa</option></select>
                 <select class="input-field"><option>Any Rating</option><option>4 Stars & Up</option><option>3 Stars & Up</option></select>
                 <button class="btn btn-primary" style="width: 100%;">Search</button>
             </div>
             <div id="doctor-list-container" class="doctor-list-grid"></div>
        </section>
        
        <section id="dosha-quiz-view" class="view" style="max-width: 42rem; margin: auto;">
             <div class="card non-interactive" style="text-align: center;">
                 <h2 class="page-title" style="margin-bottom: 0.5rem;">Discover Your Dosha</h2>
                 <p class="page-subtitle">Answer the questions to understand your unique mind-body constitution.</p>
                 
                 <div id="quiz-container">
                    <div id="quiz-progress-container">
                        <div id="quiz-progress-bar"></div>
                    </div>
                    <div id="quiz-question-container">
                        </div>
                 </div>

                 <div id="quiz-result" style="display: none;">
                    </div>
             </div>
        </section>

        <section id="ai-wellness-view" class="view" style="max-width: 42rem; margin: auto;">
            <div class="card non-interactive">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                    <i class="ph-fill ph-robot" style="font-size: 2.5rem; color: var(--secondary-color);"></i>
                    <div>
                        <h2 class="page-title" style="margin-bottom: 0;">AI Wellness Assistant</h2>
                        <p style="color: var(--text-light);">Ask a question about Ayurveda, diet, or healthy habits.</p>
                    </div>
                </div>
                <div id="ai-chat-history" class="ai-chat-history">
                    <div style="text-align: center; color: var(--text-light); padding: 1rem;">Welcome! How can I help you on your wellness journey today?</div>
                </div>
                <form id="ai-wellness-form" style="display: flex; gap: 0.5rem;">
                    <input type="text" id="ai-wellness-prompt" class="input-field" placeholder="e.g., What are good foods for Pitta dosha?" required>
                    <button type="submit" id="ai-wellness-submit" class="btn btn-primary" style="width: 6rem; display: flex; align-items: center; justify-content: center;">Send</button>
                </form>
                 <p style="font-size: 0.75rem; color: #9ca3af; margin-top: 0.5rem; text-align: center;">Disclaimer: This AI assistant is for informational purposes only and does not constitute medical advice.</p>
            </div>
        </section>

        <section id="ai-summarizer-view" class="view" style="max-width: 48rem; margin: auto;">
            <div class="card non-interactive">
                 <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                    <i class="ph-fill ph-magic-wand" style="font-size: 2.5rem; color: var(--secondary-color);"></i>
                    <div>
                        <h2 class="page-title" style="margin-bottom: 0;">AI Treatment Summarizer</h2>
                        <p style="color: var(--text-light);">Paste your clinical notes below to generate a patient-friendly summary.</p>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr; gap: 1.5rem;">
                    <div>
                        <label for="doctor-notes" style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Your Clinical Notes</label>
                        <textarea id="doctor-notes" rows="10" class="input-field" placeholder="e.g., Patient presented with symptoms of agni mandya... Prescribed deepana and pachana herbs..."></textarea>
                    </div>
                    <div>
                        <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Generated Summary</label>
                        <div id="ai-summary-output" style="height: 100%; background-color: var(--bg-light); border-radius: 0.5rem; padding: 1rem; border: 1px solid var(--border-color); color: var(--text-light);">The summary will appear here...</div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 1.5rem;">
                    <button id="ai-summarize-button" class="btn btn-primary" style="font-size: 1.125rem;">Generate Summary</button>
                </div>
            </div>
        </section>

        <section id="profile-view" class="view">
            <h2 class="page-title">My Profile</h2>
            <div class="card non-interactive profile-grid">
                <div style="text-align: center;">
                    <img id="profile-img" src="https://placehold.co/150x150/f5f5dc/3a3a3a?text=A" alt="Profile Picture" style="width: 150px; height: 150px; border-radius: 9999px; margin: auto; border: 4px solid var(--secondary-color);">
                    <button class="btn btn-secondary" style="font-size: 0.875rem; padding: 0.5rem 1rem; margin-top: 1rem;">Upload Photo</button>
                </div>
                <div>
                    <form id="profile-form">
                        <div style="margin-bottom: 1rem;">
                            <label for="profile-name" style="display: block; font-weight: 500; margin-bottom: 0.5rem;">Full Name</label>
                            <input type="text" id="profile-name" class="input-field" value="Aisha">
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <label for="profile-email" style="display: block; font-weight: 500; margin-bottom: 0.5rem;">Email Address</label>
                            <input type="email" id="profile-email" class="input-field" value="customer@ayur.com" readonly>
                        </div>
                        <div id="role-specific-profile-fields"></div>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </form>
                </div>
            </div>
        </section>

        <section id="treatment-plan-view" class="view">
            <h2 class="page-title">Doctor's Instructions</h2>
            <p class="page-subtitle">Your comprehensive wellness plan from Dr. Anjali Sharma (updated Sep 15, 2025)</p>
            <div style="display: grid; grid-template-columns: 1fr; gap: 1.5rem;">
                <div class="card non-interactive">
                    <h3 style="font-size: 1.5rem; font-weight: 600; color: var(--primary-color); margin-bottom: 1rem;">Dietary Plan</h3>
                    <ul style="list-style-position: inside; margin: 0; padding: 0;">
                        <li>Avoid cold, spicy, and fried foods.</li>
                        <li>Favor warm, cooked meals like kitchari and vegetable soups.</li>
                        <li>Drink warm ginger tea throughout the day to aid digestion.</li>
                        <li>Eat your largest meal at lunchtime when digestive fire is strongest.</li>
                    </ul>
                </div>
                <div class="card non-interactive">
                    <h3 style="font-size: 1.5rem; font-weight: 600; color: var(--primary-color); margin-bottom: 1rem;">Exercise & Yoga</h3>
                    <ul style="list-style-position: inside; margin: 0; padding: 0;">
                        <li>Practice gentle yoga or stretching for 20 minutes daily. (Focus on twists and forward folds).</li>
                        <li>Take a calm, 15-minute walk after dinner.</li>
                        <li>Recommended Asanas: Pawanmuktasana (Wind-Relieving Pose), Marjaryasana-Bitilasana (Cat-Cow Pose).</li>
                    </ul>
                </div>
                <div class="card non-interactive">
                    <h3 style="font-size: 1.5rem; font-weight: 600; color: var(--primary-color); margin-bottom: 1rem;">Medicines</h3>
                    <ul style="list-style-position: inside; margin: 0; padding: 0;">
                        <li><strong>Trikatu Churna:</strong> 1/2 tsp with warm water before meals (twice a day).</li>
                        <li><strong>Hingwashtak Churna:</strong> 1/2 tsp mixed with the first bite of your meal.</li>
                    </ul>
                </div>
                <div class="card non-interactive">
                    <h3 style="font-size: 1.5rem; font-weight: 600; color: var(--primary-color); margin-bottom: 1rem;">Lifestyle</h3>
                     <ul style="list-style-position: inside; margin: 0; padding: 0;">
                        <li>Go to bed by 10 PM and wake up by 6 AM to sync with natural rhythms.</li>
                        <li>Perform a daily self-massage (abhyanga) with warm sesame oil before bathing.</li>
                        <li>Practice 5 minutes of deep belly breathing (diaphragmatic breathing) upon waking.</li>
                    </ul>
                </div>
                <div class="card non-interactive">
                    <h3 style="font-size: 1.5rem; font-weight: 600; color: var(--primary-color); margin-bottom: 1rem;">Attachments</h3>
                    <a href="#" style="display: flex; align-items: center; gap: 0.5rem;"><i class="ph ph-file-pdf"></i> Detailed_Diet_Chart.pdf</a>
                </div>
            </div>
        </section>

         <section id="journal-view" class="view">
              <h2 class="page-title">Wellness Journal</h2>
              <div class="card non-interactive">
                  <form id="journal-form">
                      <div style="margin-bottom: 1rem;">
                          <label for="journal-date" style="display: block; font-weight: 500; margin-bottom: 0.5rem;">Date</label>
                          <input type="date" id="journal-date" class="input-field">
                      </div>
                      <div style="margin-bottom: 1rem;">
                          <label for="journal-mood" style="display: block; font-weight: 500; margin-bottom: 0.5rem;">How are you feeling today? (1-5)</label>
                          <input type="range" id="journal-mood" class="input-field" min="1" max="5">
                      </div>
                       <div style="margin-bottom: 1.5rem;">
                          <label for="journal-notes" style="display: block; font-weight: 500; margin-bottom: 0.5rem;">Notes (Symptoms, Diet, etc.)</label>
                          <textarea id="journal-notes" rows="4" class="input-field"></textarea>
                      </div>
                      <button type="submit" class="btn btn-primary">Add Entry</button>
                  </form>
              </div>
        </section>

        <section id="progress-tracker-view" class="view">
            <h2 class="page-title">Progress Tracker</h2>
            <div class="card non-interactive">
                <h3 style="font-size: 1.5rem; font-weight: 600; color: var(--primary-color); margin-bottom: 1.5rem;">Mood Over Time</h3>
                <div style="display: flex; justify-content: space-around; align-items: flex-end; height: 200px; border-left: 2px solid var(--border-color); border-bottom: 2px solid var(--border-color); padding-left: 1rem;">
                    <div style="width: 15%; background-color: var(--secondary-color); height: 60%;" title="Day 1: 3/5"></div>
                    <div style="width: 15%; background-color: var(--secondary-color); height: 80%;" title="Day 2: 4/5"></div>
                    <div style="width: 15%; background-color: var(--secondary-color); height: 70%;" title="Day 3: 3.5/5"></div>
                    <div style="width: 15%; background-color: var(--secondary-color); height: 90%;" title="Day 4: 4.5/5"></div>
                    <div style="width: 15%; background-color: var(--secondary-color); height: 85%;" title="Day 5: 4.25/5"></div>
                </div>
            </div>
        </section>

        <section id="educational-feed-view" class="view">
            <h2 class="page-title">Educational Feed</h2>
            <p class="page-subtitle">Curated articles to support your wellness journey.</p>
            <div id="educational-feed-container" class="feed-grid">
                </div>
        </section>

        <section id="messages-view" class="view">
            <h2 class="page-title">Messages</h2>
            <p class="page-subtitle">A record of all communication with your healthcare providers.</p>
            <div id="messages-container" class="card non-interactive" style="padding: 0;">
                </div>
        </section>
        
        <section id="patient-list-view" class="view">
            <h2 class="page-title">My Patients</h2>
            <div class="card non-interactive">
                <table id="patient-table" style="width: 100%; text-align: left; border-collapse: collapse;">
                    <thead style="border-bottom: 2px solid var(--border-color);">
                        <tr>
                            <th style="padding: 0.5rem;">Name</th>
                            <th style="padding: 0.5rem;">Age</th>
                            <th style="padding: 0.5rem;">Gender</th>
                            <th style="padding: 0.5rem;">Previous Consultations</th>
                            <th style="padding: 0.5rem;">Ongoing Therapy</th>
                            <th style="padding: 0.5rem;">Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <section id="earnings-view" class="view">
             <h2 class="page-title">Earnings</h2>
             <div class="dashboard-grid" style="grid-template-columns: 1fr 1fr; margin-bottom: 2rem;">
                 <div class="card non-interactive" style="text-align:center;"><p style="font-size:2rem; font-weight:700; color:var(--secondary-color);">₹100,000</p><p style="color:var(--text-light)">This Month</p></div>
                 <div class="card non-interactive" style="text-align:center;"><p style="font-size:2rem; font-weight:700; color:var(--secondary-color);">₹700,000</p><p style="color:var(--text-light)">Total Earned</p></div>
             </div>
             <div class="card non-interactive">
                 <h3 class="page-title" style="font-size:1.5rem; margin-bottom:1rem;">Recent Payouts</h3>
                 <table>
                     <thead><tr><th>Date</th><th>Amount</th><th>Status</th></tr></thead>
                     <tbody>
                         <tr><td>Sep 1, 2025</td><td>₹44,000</td><td><span style="color: #166534;">Completed</span></td></tr>
                         <tr><td>Aug 1, 2025</td><td>₹38,400</td><td><span style="color: #166534;">Completed</span></td></tr>
                     </tbody>
                 </table>
             </div>
        </section>
        
        <section id="user-management-view" class="view">
             <h2 class="page-title">User Management</h2>
             <div class="card non-interactive">
                 <input type="text" placeholder="Search users by name or email..." class="input-field" style="margin-bottom:1.5rem;">
                 <div style="overflow-x:auto;">
                     <table>
                         <thead><tr><th>Name</th><th>Email</th><th>Role</th><th>Joined</th><th>Status</th><th>Actions</th></tr></thead>
                         <tbody id="user-management-table"></tbody>
                     </table>
                 </div>
             </div>
        </section>

        <section id="service-management-view" class="view">
             <h2 class="page-title">Service Management</h2>
             <div class="card non-interactive">
                 <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1.5rem;">
                     <p style="color:var(--text-light);">Add, edit, or remove services offered on the platform.</p>
                     <button class="btn btn-primary">Add New Service</button>
                 </div>
                 <div style="overflow-x:auto;">
                     <table>
                         <thead><tr><th>Service Name</th><th>Price</th><th>Category</th><th>Actions</th></tr></thead>
                         <tbody id="service-management-table"></tbody>
                     </table>
                 </div>
             </div>
        </section>

    </main>

    <script>
        // --- MOCK DATA ---
        const mockData = {
            doctors: [{ id: 1, name: "Dr. Anjali Sharma", specialization: "Panchakarma Specialist", location: "Chandigarh, India", rating: 4.8, img: 'https://placehold.co/100x100/a2c4a2/FFFFFF?text=AS' },{ id: 2, name: "Dr. Vikram Singh", specialization: "Kayachikitsa (Internal Medicine)", location: "Delhi, India", rating: 4.9, img: 'https://placehold.co/100x100/c4a2a2/FFFFFF?text=VS' },{ id: 3, name: "Dr. Priya Desai", specialization: "Ayurvedic Nutrition", location: "Mumbai, India", rating: 4.7, img: 'https://placehold.co/100x100/a2a2c4/FFFFFF?text=PD' },],
            customerAppointments: [
                { id: 101, doctor: "Dr. Anjali Sharma", doctorId: 1, service: "Panchakarma Consultation", date: "2025-09-18T11:00:00", type: "Video", price: 1500, status: 'Confirmed' },
                { id: 102, doctor: "Dr. Priya Desai", doctorId: 3, service: "Diet Plan Follow-up", date: "2025-09-22T14:30:00", type: "In-Clinic", price: 1000, status: 'Confirmed' }
            ],
            doctorAppointments: [
                { id: 201, patient: "Rohan Verma", service: "Initial Consultation", date: "2025-09-16T11:30:00", type: "Video", price: 1500, status: 'Confirmed' },
                { id: 202, patient: "Sunita Kaur", service: "Abhyanga Therapy", date: "2025-09-16T14:00:00", type: "In-Clinic", price: 2500, status: 'Confirmed' }
            ],
            verificationQueue: [{ name: "Dr. Sameer Gupta", license: "Lic #84620", submitted: "2 days ago" },{ name: "Dr. Meera Iyer", license: "Lic #91234", submitted: "5 days ago" },],
            patients: [
                { name: "Rohan Verma", age: 34, gender: "Male", previousConsultations: 3, ongoingTherapy: "Pitta Diet Plan" }, 
                { name: "Sunita Kaur", age: 45, gender: "Female", previousConsultations: 1, ongoingTherapy: "Abhyanga Massage" },
                { name: "Ankit Patel", age: 29, gender: "Male", previousConsultations: 5, ongoingTherapy: "Herbal Supplements" },
                { name: "Priya Singh", age: 38, gender: "Female", previousConsultations: 2, ongoingTherapy: "Yoga & Meditation" },
            ],
            users: [
                { name: 'Aisha', email: 'customer@ayur.com', role: 'Customer', joined: '2025-08-20', status: 'Active', password: 'password' },
                { name: 'Dr. Vikram Singh', email: 'doctor@ayur.com', role: 'Doctor', joined: '2025-07-15', status: 'Active', password: 'password' },
                { name: 'Admin', email: 'admin@ayur.com', role: 'Admin', joined: '2025-01-01', status: 'Active', password: 'password' }
            ],
            services: [
                { name: 'Panchakarma Consultation', price: 1500, category: 'Consultation' },
                { name: 'Abhyanga Massage', price: 2500, category: 'Therapy' },
                { name: 'Shirodhara', price: 3000, category: 'Therapy' },
            ],
            educationalFeed: [
                { id: 1, title: 'Understanding Your Dosha: A Beginner\'s Guide', author: 'AyurSutra Team', snippet: 'Learn the fundamentals of Vata, Pitta, and Kapha and how they influence your health and personality.', image: 'https://placehold.co/240x240/a2c4a2/3a3a3a?text=Dosha' },
                { id: 2, title: 'The Power of "Agni": Nurturing Your Digestive Fire', author: 'Dr. Anjali Sharma', snippet: 'Discover why a strong digestive fire (Agni) is the cornerstone of good health in Ayurveda and tips to improve it.', image: 'https://placehold.co/240x240/daa520/3a3a3a?text=Agni' },
            ],
            messages: [
                { id: 1, from: 'Dr. Anjali Sharma', subject: 'Follow-up on your treatment plan', snippet: 'Dear Aisha, just checking in to see how you are feeling with the new dietary changes...', read: false },
                { id: 2, from: 'AyurSutra Support', subject: 'Your upcoming appointment reminder', snippet: 'This is a friendly reminder of your appointment with Dr. Priya Desai on Sep 22, 2025.', read: true },
            ],
            // NEW: Quiz Questions
            quizQuestions: [
                { question: "How would you describe your physical build?", options: [{text: "Light, thin, and slender", dosha: "Vata"}, {text: "Medium, muscular, and athletic", dosha: "Pitta"}, {text: "Large, heavy, and well-built", dosha: "Kapha"}] },
                { question: "What is your skin typically like?", options: [{text: "Dry, thin, and cool to the touch", dosha: "Vata"}, {text: "Warm, oily, and prone to rashes or acne", dosha: "Pitta"}, {text: "Thick, smooth, oily, and cool", dosha: "Kapha"}] },
                { question: "How is your appetite and digestion?", options: [{text: "Irregular, I often forget to eat", dosha: "Vata"}, {text: "Strong, I get 'hangry' if I miss a meal", dosha: "Pitta"}, {text: "Steady and moderate, I enjoy food", dosha: "Kapha"}] },
                { question: "Under stress, you tend to become:", options: [{text: "Anxious, worried, and overwhelmed", dosha: "Vata"}, {text: "Irritable, short-tempered, and aggressive", dosha: "Pitta"}, {text: "Withdrawn, slow to react, and complacent", dosha: "Kapha"}] },
                { question: "Which climate do you prefer?", options: [{text: "Warm and humid climates", dosha: "Vata"}, {text: "Cool and dry climates", dosha: "Pitta"}, {text: "Warm and dry climates", dosha: "Kapha"}] },
                { question: "How is your sleep pattern?", options: [{text: "Light, interrupted, and prone to insomnia", dosha: "Vata"}, {text: "Moderate but can be disturbed by feeling hot", dosha: "Pitta"}, {text: "Deep, long, and I can sometimes oversleep", dosha: "Kapha"}] },
                { question: "How would you describe your personality?", options: [{text: "Creative, energetic, and talkative", dosha: "Vata"}, {text: "Intelligent, focused, and a natural leader", dosha: "Pitta"}, {text: "Calm, loving, and supportive", dosha: "Kapha"}] },
            ],
            // NEW: Notifications
            notifications: {
                Customer: [
                    { id: 1, icon: 'chat-circle-dots', message: "Dr. Sharma replied to your message about Trikatu.", time: "2 hours ago", read: false },
                    { id: 2, icon: 'calendar', message: "Your appointment with Dr. Desai is confirmed for Sep 22.", time: "1 day ago", read: true },
                    { id: 3, icon: 'first-aid-kit', message: "Your treatment plan has been updated.", time: "3 days ago", read: true }
                ],
                Doctor: [
                    { id: 1, icon: 'calendar-plus', message: "A new patient, Ankit P., booked an appointment for tomorrow.", time: "5 hours ago", read: false },
                    { id: 2, icon: 'wallet', message: "Your weekly payout of ₹25,000 has been processed.", time: "2 days ago", read: true },
                    { id: 3, icon: 'star', message: "You received 5-star feedback from Sunita K.", time: "4 days ago", read: true },
                ]
            }
        };

        // --- APPLICATION STATE ---
        let appState = { isLoggedIn: false, userRole: null, userName: '' };

        // --- DOM ELEMENTS ---
        const views = document.querySelectorAll('.view');
        const authLinks = document.getElementById('auth-links');
        const userMenu = document.getElementById('user-menu');
        const welcomeMessage = document.getElementById('welcome-message');
        const userDropdown = document.getElementById('user-dropdown');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const aiWellnessForm = document.getElementById('ai-wellness-form');
        const aiSummarizeButton = document.getElementById('ai-summarize-button');
        const forgotPasswordForm = document.getElementById('forgot-password-form');
        const themeToggles = [document.getElementById('theme-toggle'), document.getElementById('theme-toggle-user')];
        const profileForm = document.getElementById('profile-form');
        const journalForm = document.getElementById('journal-form');
        const mainNavLinks = document.getElementById('main-nav-links');
        const contactForm = document.getElementById('contact-form');
        const scheduleForm = document.getElementById('schedule-form');
        const notificationDropdown = document.getElementById('notification-dropdown');

        // --- ROUTING / VIEW MANAGEMENT ---
        function showView(viewId) {
            views.forEach(view => { view.style.display = 'none'; });
            document.getElementById(viewId).style.display = 'block';
            if(userDropdown) userDropdown.style.display = 'none';
            if(notificationDropdown) notificationDropdown.style.display = 'none';
            window.scrollTo(0, 0);
        }
        
        function goHome() {
            if (appState.isLoggedIn) {
                showDashboard();
            } else {
                showView('home-view');
            }
        }

        // --- UI UPDATE FUNCTIONS ---
        function updateUI() {
            if (appState.isLoggedIn) {
                authLinks.style.display = 'none';
                userMenu.style.display = 'flex';
                welcomeMessage.textContent = `Welcome, ${appState.userName}!`;
                mainNavLinks.style.display = appState.userRole === 'Customer' ? 'flex' : 'none';
                renderNotifications();
            } else {
                authLinks.style.display = 'flex';
                userMenu.style.display = 'none';
                mainNavLinks.style.display = 'flex';
            }
        }
        function showDashboard() { 
            if (appState.userRole) { 
                const dashboardId = `${appState.userRole.toLowerCase()}-dashboard-view`;
                showView(dashboardId); 
            } 
        }
        
        // --- DYNAMIC CONTENT RENDERING ---
        function renderAll() {
            renderDoctorList();
            renderAppointments();
            renderAdminQueue();
            renderPatientList();
            renderUserManagementTable();
            renderServiceManagementTable();
            renderEducationalFeed();
            renderMessages();
        }
        function renderDoctorList() {
            const container = document.getElementById('doctor-list-container');
            container.innerHTML = mockData.doctors.map(doc => `
                <div class="card" style="display: flex; flex-direction: column; align-items: center; text-align: center;">
                    <img src="${doc.img}" alt="${doc.name}" style="width: 6rem; height: 6rem; border-radius: 9999px; margin-bottom: 1rem; border: 4px solid var(--secondary-color);">
                    <h4 style="font-size: 1.25rem; font-weight: 700; color: var(--primary-color);">${doc.name}</h4>
                    <p style="color: var(--secondary-color); font-weight: 500;">${doc.specialization}</p>
                    <p style="color: var(--text-light); font-size: 0.875rem; margin-bottom: 0.75rem;">${doc.location}</p>
                    <div style="display: flex; align-items: center; gap: 0.25rem; color: var(--accent-color); margin-bottom: 1rem;"><i class="ph-fill ph-star"></i> <span>${doc.rating}</span></div>
                    <button class="btn btn-primary" style="margin-top: auto; width: 100%;">Book Now</button>
                </div>`).join('');
        }
        function renderAppointments() {
            const currentDate = new Date('2025-09-16T14:30:00'); // Set current date for demo
            const getCountdown = (date) => {
                const diffTime = new Date(date) - currentDate;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                if (diffTime > 0 && new Date(date).getDate() === currentDate.getDate()) return { text: "Today", value: new Date(date).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) };
                if (diffDays <= 0) return { text: "Today", value: new Date(date).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) };
                if (diffDays === 1) return { text: "Tomorrow", value: ""};
                return { text: `In ${diffDays} days`, value: "" };
            }

            const custContainer = document.getElementById('customer-appointments');
            custContainer.innerHTML = mockData.customerAppointments.map(apt => {
                const countdown = getCountdown(apt.date);
                const doctor = mockData.doctors.find(d => d.id === apt.doctorId);
                return `
                <div class="appointment-card">
                    <div class="appointment-card-time">
                        <div class="day">${countdown.value || countdown.text.split(' ')[1] || 'Today'}</div>
                        <div class="label">${countdown.value ? 'Today' : countdown.text.split(' ')[0]}</div>
                    </div>
                    <div class="appointment-card-details">
                        <h4>${apt.service}</h4>
                        <p>${apt.doctor}</p>
                        <p><i class="ph-fill ph-${apt.type === 'Video' ? 'video-camera' : 'buildings'}"></i> ${apt.type} &bull; ${new Date(apt.date).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</p>
                    </div>
                    <div class="appointment-card-actions">
                        ${apt.type === 'Video' ? `<button class="btn btn-primary btn-sm">Join Call</button>` : ''}
                        <button class="btn btn-sm" style="background-color: transparent; border: 1px solid var(--border-color); color: var(--text-dark);" onclick="handleAppointmentClick(${apt.id}, 'Customer')">View Details</button>
                    </div>
                </div>`;
            }).join('') || '<p style="color: var(--text-light);">No upcoming appointments.</p>';
            
            const docContainer = document.getElementById('doctor-appointments');
            docContainer.innerHTML = mockData.doctorAppointments.filter(apt => new Date(apt.date).getDate() === currentDate.getDate()).map(apt => {
                const countdown = getCountdown(apt.date);
                return `
                <div class="appointment-card">
                    <div class="appointment-card-time">
                        <div class="day">${countdown.value || 'Today'}</div>
                        <div class="label">${countdown.value ? '' : countdown.text}</div>
                    </div>
                    <div class="appointment-card-details">
                        <h4>${apt.patient}</h4>
                        <p>${apt.service}</p>
                        <p><i class="ph-fill ph-${apt.type === 'Video' ? 'video-camera' : 'buildings'}"></i> ${apt.type}</p>
                    </div>
                    <div class="appointment-card-actions">
                        ${apt.type === 'Video' ? `<button class="btn btn-primary btn-sm">Join Call</button>` : ''}
                        <button class="btn btn-sm" style="background-color: transparent; border: 1px solid var(--border-color); color: var(--text-dark);" onclick="handleAppointmentClick(${apt.id}, 'Doctor')">View Details</button>
                    </div>
                </div>`;
            }).join('') || '<p style="color: var(--text-light);">No appointments scheduled for today.</p>';
        }
        function renderAdminQueue() {
            const queueContainer = document.getElementById('admin-verification-queue');
            queueContainer.innerHTML = mockData.verificationQueue.map(req => `<div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; border-bottom: 1px solid var(--border-color);"><div><p style="font-weight: 600;">${req.name} <span style="font-size: 0.875rem; color: var(--text-light); font-weight: 400;">(${req.license})</span></p><p style="font-size: 0.75rem; color: #6b7280;">Submitted ${req.submitted}</p></div><div style="display: flex; gap: 0.5rem;"><button class="btn" style="font-size:0.75rem; padding: 0.25rem 0.75rem; background-color: #22c55e; color:white;">Approve</button><button class="btn" style="font-size:0.75rem; padding: 0.25rem 0.75rem; background-color: #ef4444; color:white;">Reject</button></div></div>`).join('');
        }
        
        function renderPatientList() {
            const tableBody = document.querySelector('#patient-table tbody');
            tableBody.innerHTML = mockData.patients.map(p => `
            <tr style="border-bottom: 1px solid var(--border-color);">
                <td style="padding: 0.75rem 0.5rem;">${p.name}</td>
                <td style="padding: 0.75rem 0.5rem;">${p.age}</td>
                <td style="padding: 0.75rem 0.5rem;">${p.gender}</td>
                <td style="padding: 0.75rem 0.5rem;">${p.previousConsultations}</td>
                <td style="padding: 0.75rem 0.5rem;">${p.ongoingTherapy}</td>
                <td style="padding: 0.75rem 0.5rem;"><button class="btn btn-secondary" style="font-size:0.8rem; padding:0.25rem 0.5rem;">View</button></td>
            </tr>`).join('');
        }
        function renderUserManagementTable() {
            const tableBody = document.getElementById('user-management-table');
            tableBody.innerHTML = mockData.users.map(u => `<tr><td>${u.name}</td><td>${u.email}</td><td>${u.role}</td><td>${u.joined}</td><td><span style="color:${u.status === 'Active' ? '#166534' : '#ef4444'}">${u.status}</span></td><td><button class="btn" style="font-size:0.8rem; padding:0.25rem 0.5rem; background-color:#ef4444; color:white;">Suspend</button></td></tr>`).join('');
        }
        function renderServiceManagementTable() {
             const tableBody = document.getElementById('service-management-table');
            tableBody.innerHTML = mockData.services.map(s => `<tr><td>${s.name}</td><td>₹${s.price.toFixed(2)}</td><td>${s.category}</td><td><button class="btn btn-secondary" style="font-size:0.8rem; padding:0.25rem 0.5rem;">Edit</button></td></tr>`).join('');
        }
        function renderEducationalFeed() {
            const container = document.getElementById('educational-feed-container');
            container.innerHTML = mockData.educationalFeed.map(article => `
                <div class="card article-card">
                    <img src="${article.image}" alt="">
                    <div class="article-card-content">
                        <h4>${article.title}</h4>
                        <p style="margin-bottom: 0.5rem;">By ${article.author}</p>
                        <p>${article.snippet}</p>
                    </div>
                </div>
            `).join('');
        }
        function renderMessages() {
            const container = document.getElementById('messages-container');
            container.innerHTML = mockData.messages.map(msg => `
                <div class="message-thread ${msg.read ? '' : 'unread'}">
                    ${msg.read ? '<div style="width: 8px;"></div>' : '<div class="message-indicator"></div>'}
                    <i class="ph-fill ph-user-circle message-icon"></i>
                    <div style="flex-grow: 1;">
                        <p class="message-subject">${msg.subject}</p>
                        <p class="message-from">From: ${msg.from}</p>
                    </div>
                    <i class="ph ph-caret-right" style="font-size: 1.2rem; color: var(--text-light);"></i>
                </div>
            `).join('');
        }

        // --- APPOINTMENT DETAIL LOGIC ---
        function handleAppointmentClick(appointmentId, role) {
            let appointment;
            if (role === 'Customer') {
                appointment = mockData.customerAppointments.find(a => a.id === appointmentId);
            } else {
                appointment = mockData.doctorAppointments.find(a => a.id === appointmentId);
            }
            if (appointment) {
                showAppointmentDetail(appointment, role);
            }
        }

        function showAppointmentDetail(appointment, role) {
            const headerInfo = document.getElementById('ad-header-info');
            const actionButtons = document.getElementById('ad-action-buttons');
            const appointmentDate = new Date(appointment.date);
            const currentDate = new Date('2025-09-16T14:30:00');
            const diffTime = appointmentDate - currentDate;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            document.getElementById('ad-service').textContent = appointment.service;
            document.getElementById('ad-date').textContent = appointmentDate.toLocaleDateString(undefined, { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            document.getElementById('ad-time').textContent = appointmentDate.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            document.getElementById('ad-type').textContent = appointment.type;
            document.getElementById('ad-status').textContent = appointment.status;
            document.getElementById('ad-price').textContent = `₹${appointment.price.toFixed(2)}`;
            document.getElementById('ad-total-price').textContent = `₹${appointment.price.toFixed(2)}`;
            document.getElementById('ad-countdown-days').textContent = diffDays >= 0 ? diffDays : 'Past';
            document.getElementById('ad-countdown-label').textContent = diffDays === 1 ? 'Day to go' : 'Days to go';


            if (role === 'Customer') {
                const doctor = mockData.doctors.find(d => d.id === appointment.doctorId);
                headerInfo.innerHTML = `
                    <img src="${doctor.img}" alt="${doctor.name}">
                    <div>
                        <h3 style="font-size: 1.25rem; font-weight: 600; color: var(--primary-color); margin:0;">${doctor.name}</h3>
                        <p style="color: var(--text-light); margin:0;">${doctor.specialization}</p>
                    </div>`;
                actionButtons.innerHTML = `
                    <button class="btn btn-primary">Reschedule</button>
                    <button class="btn" style="background-color: transparent; border: 1px solid var(--border-color); color: var(--text-dark);">Cancel Appointment</button>
                `;
            } else { // Doctor's view
                headerInfo.innerHTML = `
                    <img src="https://placehold.co/80x80/f5f5dc/3a3a3a?text=${appointment.patient.charAt(0)}" alt="${appointment.patient}">
                    <div>
                        <h3 style="font-size: 1.25rem; font-weight: 600; color: var(--primary-color); margin:0;">${appointment.patient}</h3>
                        <p style="color: var(--text-light); margin:0;">Patient</p>
                    </div>`;
                actionButtons.innerHTML = `
                    <button class="btn btn-primary">${appointment.type === 'Video' ? 'Join Video Call' : 'Mark as Complete'}</button>
                    <button class="btn btn-secondary">View Patient History</button>
                `;
            }

            showView('appointment-detail-view');
        }
        
        // --- EVENT HANDLERS & AUTH LOGIC ---
        function toggleDropdown() { 
            notificationDropdown.style.display = 'none';
            userDropdown.style.display = userDropdown.style.display === 'block' ? 'none' : 'block'; 
        }
        function switchAuthTab(tab) {
            const loginTab = document.getElementById('login-tab'), regTab = document.getElementById('register-tab');
            loginTab.classList.toggle('tab-active', tab === 'login');
            regTab.classList.toggle('tab-active', tab === 'register');
            loginForm.style.display = tab === 'login' ? 'block' : 'none';
            registerForm.style.display = tab === 'register' ? 'block' : 'none';
        }
        function prefillLogin(email, password = 'password') {
            document.getElementById('login-email').value = email;
            document.getElementById('login-password').value = password;
        }

        function showLoginForRole(role) {
            showView('auth-view');
            switchAuthTab('login');
            if (role === 'customer') prefillLogin('customer@ayur.com');
            else if (role === 'doctor') prefillLogin('doctor@ayur.com');
            else if (role === 'admin') prefillLogin('admin@ayur.com');
        }

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const user = mockData.users.find(u => u.email === email && u.password === password);
            if (user) {
                appState.isLoggedIn = true;
                appState.userRole = user.role;
                appState.userName = user.name;
                updateUI();
                showDashboard();
            } else {
                alert('Invalid credentials. Please try again.');
            }
        });
        
        contactForm.addEventListener('submit', (e) => { e.preventDefault(); alert('Thank you for your message! We will get back to you shortly.'); contactForm.reset(); });
        scheduleForm.addEventListener('submit', (e) => { e.preventDefault(); alert('Availability has been updated successfully!'); });

        registerForm.addEventListener('submit', (e) => { e.preventDefault(); alert('Registration successful! (This is a demo)'); switchAuthTab('login'); });
        forgotPasswordForm.addEventListener('submit', (e) => { e.preventDefault(); alert('Password reset link sent! (This is a demo)'); showView('auth-view'); });
        profileForm.addEventListener('submit', (e) => { e.preventDefault(); alert('Profile updated!'); });
        journalForm.addEventListener('submit', (e) => { e.preventDefault(); alert('Journal entry saved!'); journalForm.reset(); });
        function logout() { 
            appState.isLoggedIn = false; 
            appState.userRole = null; 
            appState.userName = ''; 
            updateUI(); 
            document.getElementById('notification-dropdown').innerHTML = ''; // Clear notifications
            document.getElementById('notification-dot').classList.remove('active');
            showView('home-view'); 
        }
        
        // --- NEW: Interactive Quiz Logic ---
        let currentQuestionIndex = 0;
        let userAnswers = {};
        
        function startQuiz() {
            showView('dosha-quiz-view');
            currentQuestionIndex = 0;
            userAnswers = { Vata: 0, Pitta: 0, Kapha: 0 };
            document.getElementById('quiz-result').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'block';
            displayQuestion();
        }

        function displayQuestion() {
            const questionContainer = document.getElementById('quiz-question-container');
            const progressBar = document.getElementById('quiz-progress-bar');
            const questionData = mockData.quizQuestions[currentQuestionIndex];
            
            // Update progress bar
            progressBar.style.width = `${((currentQuestionIndex) / mockData.quizQuestions.length) * 100}%`;
            
            // Fade out old question
            questionContainer.style.opacity = 0;

            setTimeout(() => {
                let optionsHTML = questionData.options.map((option, index) => `
                    <div>
                        <input type="radio" name="quiz_option" id="q${currentQuestionIndex}_o${index}" value="${option.dosha}">
                        <label for="q${currentQuestionIndex}_o${index}">${option.text}</label>
                    </div>
                `).join('');

                questionContainer.innerHTML = `
                    <p class="quiz-question-text">${currentQuestionIndex + 1}. ${questionData.question}</p>
                    <div class="quiz-options">${optionsHTML}</div>
                `;
                
                // Fade in new question
                questionContainer.style.opacity = 1;

                // Add event listeners to new options
                document.querySelectorAll('input[name="quiz_option"]').forEach(radio => {
                    radio.addEventListener('change', (e) => handleAnswerSelection(e.target.value));
                });
            }, 300); // Wait for fade out to complete
        }

        function handleAnswerSelection(selectedDosha) {
            userAnswers[selectedDosha]++;
            currentQuestionIndex++;
            if (currentQuestionIndex < mockData.quizQuestions.length) {
                displayQuestion();
            } else {
                document.getElementById('quiz-progress-bar').style.width = '100%';
                setTimeout(showQuizResult, 500);
            }
        }

        function showQuizResult() {
            let resultDosha = 'Balanced';
            let maxCount = 0;
            // Find the dominant dosha
            for (const dosha in userAnswers) {
                if (userAnswers[dosha] > maxCount) {
                    maxCount = userAnswers[dosha];
                    resultDosha = dosha;
                }
            }
            
            const resultInfo = {
                Vata: { icon: 'wind', elements: 'Space and Air', description: 'This suggests you are creative, energetic, and quick-thinking. To maintain balance, focus on grounding routines, warm foods, and staying hydrated.' },
                Pitta: { icon: 'fire', elements: 'Fire and Water', description: 'This indicates you are intelligent, focused, and a natural leader. To stay balanced, incorporate cooling foods, avoid excess heat, and practice patience.' },
                Kapha: { icon: 'mountains', elements: 'Earth and Water', description: 'This means you are likely calm, loving, and supportive. To find balance, stay active with regular exercise, eat light, warm foods, and seek new experiences.' }
            };

            const resultContainer = document.getElementById('quiz-result');
            resultContainer.innerHTML = `
                <div id="quiz-result-card">
                    <i class="ph-bold ph-${resultInfo[resultDosha].icon}"></i>
                    <h3 style="font-size: 1.75rem; font-weight: 700; color: var(--secondary-color); margin-bottom: 0.5rem;">Your Primary Dosha is: ${resultDosha}</h3>
                    <p style="font-size: 1.1rem; color: var(--text-dark);">Your constitution is primarily influenced by the elements of <strong>${resultInfo[resultDosha].elements}</strong>.</p>
                    <p style="color: var(--text-light); max-width: 35rem; margin: 1rem auto 2rem;">${resultInfo[resultDosha].description}</p>
                    <button class="btn btn-primary" onclick="startQuiz()">Retake Quiz</button>
                </div>
            `;
            document.getElementById('quiz-container').style.display = 'none';
            resultContainer.style.display = 'block';
        }

        // --- NEW: Notification Logic ---
        function toggleNotifications() {
            userDropdown.style.display = 'none';
            notificationDropdown.style.display = notificationDropdown.style.display === 'block' ? 'none' : 'block';
        }

        function renderNotifications() {
            const container = document.getElementById('notification-dropdown');
            const dot = document.getElementById('notification-dot');
            const userRole = appState.userRole;
            
            if (!userRole || !mockData.notifications[userRole]) {
                container.innerHTML = '<div style="padding: 1rem; text-align: center; color: var(--text-light);">No notifications.</div>';
                return;
            }

            const notifications = mockData.notifications[userRole];
            let hasUnread = false;

            let notificationsHTML = notifications.map(n => {
                if (!n.read) hasUnread = true;
                return `
                <div class="notification-item ${n.read ? '' : 'unread'}">
                    <i class="ph-fill ph-${n.icon}"></i>
                    <div>
                        <p style="margin: 0;">${n.message}</p>
                        <p class="notification-time" style="margin: 0.25rem 0 0;">${n.time}</p>
                    </div>
                </div>
                `;
            }).join('');
            
            container.innerHTML = `<div class="notification-header">Notifications</div>${notificationsHTML}`;
            
            if(hasUnread) {
                dot.classList.add('active');
            } else {
                dot.classList.remove('active');
            }
        }

        // --- THEME LOGIC ---
        function applyTheme(isDark) {
            document.body.classList.toggle('dark', isDark);
            themeToggles.forEach(toggle => toggle.checked = isDark);
        }
        themeToggles.forEach(toggle => {
            toggle.addEventListener('change', (e) => {
                const isDark = e.target.checked;
                localStorage.setItem('darkTheme', isDark);
                applyTheme(isDark);
            });
        });

        // --- GEMINI API INTEGRATION & LOGIC ---
        async function callGeminiAPI(userQuery, systemInstruction) {
            console.log("Calling mock Gemini API with query:", userQuery);
            return new Promise(resolve => {
                setTimeout(() => {
                    if (systemInstruction.includes("wellness assistant")) {
                         if (userQuery.toLowerCase().includes("pitta")) resolve("For a Pitta dosha, cooling and sweet foods are beneficial. Think cucumbers, melons, coconut, and rice. It's best to avoid spicy, salty, and sour foods like chili peppers, pickles, and excessive citrus.");
                         else if (userQuery.toLowerCase().includes("sleep")) resolve("To improve sleep, Ayurveda suggests creating a calming evening routine. Try to go to bed before 10 PM, avoid screens an hour before sleep, and drink a warm cup of milk with a pinch of nutmeg. A gentle foot massage with sesame oil can also be very relaxing.");
                         else resolve("That's an excellent question. In Ayurveda, maintaining a balanced 'Agni' (digestive fire) is key to good health. This is achieved through eating mindfully, choosing foods appropriate for your dosha, and incorporating gentle spices like ginger and cumin into your diet.");
                    } else if (systemInstruction.includes("summarize")) {
                        resolve(`<h4 style="font-weight: 700; margin-bottom: 0.5rem;">Summary for Your Patient:</h4><ul style="list-style-position: inside; padding-left: 0; margin: 0;"><li style="margin-bottom: 0.25rem;"><strong>Main Issue:</strong> You've been experiencing some weakness in your digestion.</li><li style="margin-bottom: 0.25rem;"><strong>Our Goal:</strong> We want to strengthen your digestive system to improve your energy.</li><li style="margin-bottom: 0.25rem;"><strong>Treatment Plan:</strong> I have prescribed some natural herbs to help with digestion.</li><li style="margin-bottom: 0.25rem;"><strong>Next Steps:</strong> Please follow the diet plan we discussed and try to incorporate a short, gentle walk after your meals.</li></ul>`);
                    } else { resolve("I'm sorry, I can't help with that right now."); }
                }, 1500);
            });
        }
        aiWellnessForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const promptInput = document.getElementById('ai-wellness-prompt');
            const submitButton = document.getElementById('ai-wellness-submit');
            const chatHistory = document.getElementById('ai-chat-history');
            const userQuery = promptInput.value.trim();
            if (!userQuery) return;
            chatHistory.innerHTML += `<div style="text-align: right; margin: 0.5rem 0;"><span style="background-color: var(--primary-color); color: white; border-radius: 0.5rem; padding: 0.5rem 0.75rem; display: inline-block; max-width: 80%;">${userQuery}</span></div>`;
            promptInput.value = '';
            chatHistory.scrollTop = chatHistory.scrollHeight;
            submitButton.innerHTML = `<div class="spinner" style="margin: auto;"></div>`;
            submitButton.disabled = true;
            const systemInstruction = "Act as a friendly and knowledgeable Ayurvedic wellness assistant. Provide clear, safe, and general advice. Do not give medical prescriptions. Encourage consulting a doctor for serious issues.";
            const aiResponse = await callGeminiAPI(userQuery, systemInstruction);
            chatHistory.innerHTML += `<div style="text-align: left; margin: 0.5rem 0;"><span style="background-color: var(--bg-light); color: var(--text-dark); border-radius: 0.5rem; padding: 0.5rem 0.75rem; display: inline-block; max-width: 80%;">${aiResponse}</span></div>`;
            chatHistory.scrollTop = chatHistory.scrollHeight;
            submitButton.innerHTML = `Send`;
            submitButton.disabled = false;
        });
        aiSummarizeButton.addEventListener('click', async () => {
            const notesInput = document.getElementById('doctor-notes');
            const outputDiv = document.getElementById('ai-summary-output');
            const button = document.getElementById('ai-summarize-button');
            const clinicalNotes = notesInput.value.trim();
            if (!clinicalNotes) {
                outputDiv.innerHTML = `<p style="color: #ef4444;">Please enter your clinical notes first.</p>`;
                return;
            }
            outputDiv.innerHTML = `<div style="display: flex; align-items: center; justify-content: center; height: 100%;"><div class="spinner"></div><p style="margin-left: 0.5rem;">Generating summary...</p></div>`;
            button.disabled = true; button.style.opacity = '0.5';
            const systemInstruction = "Summarize the following clinical Ayurvedic notes into simple, clear, and encouraging language for a patient. Use bullet points and avoid overly technical jargon. Focus on the main issue, the goal, and the next steps for the patient.";
            const summary = await callGeminiAPI(clinicalNotes, systemInstruction);
            outputDiv.innerHTML = summary;
            button.disabled = false; button.style.opacity = '1';
        });

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            console.log("AyurSutra App Initialized Successfully!");
            const savedTheme = localStorage.getItem('darkTheme') === 'true';
            applyTheme(savedTheme);
            
            showView('home-view');
            updateUI();
            renderAll();
            
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('journal-date').value = today;
        });
    </script>
</body>
</html>
